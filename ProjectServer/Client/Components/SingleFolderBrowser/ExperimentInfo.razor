@using ProjectServer.Shared
@inject HttpClient Http

@if (AbfFolder is not null)
{
	<main class="px-3">

		<h3 class="mt-3 fs-3 lh-1">Experiment Notes</h3>
		<div class="lh-1 mb-3"><code>@AbfFolder?.FolderPath\experiment.txt</code></div>

		@if (!ExperimentFileExists)
		{
			<div class="alert alert-warning my-4 d-inline-block" role="alert">
				<strong>⚠️ WARNING:</strong> Experiment notes file does not exist!
			</div>
		}

		<div class="container">

			<div class="row">
				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Species</span>
						<input type="text" class="form-control" value="@Notes.Species">
					</div>
				</div>

				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Strain</span>
						<input type="text" class="form-control" value="@Notes.Strain">
					</div>
				</div>

				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Date</span>
						<input type="text" class="form-control" value="@Notes.Date">
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Genotype</span>
						<input type="text" class="form-control" value="@Notes.Genotype">
					</div>
				</div>

				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">DOB</span>
						<input type="text" class="form-control" value="@Notes.DOB">
					</div>
				</div>

				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Sex</span>
						<input type="text" class="form-control" value="@Notes.Sex">
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Rig</span>
						<input type="text" class="form-control" value="@Notes.Rig">
					</div>
				</div>

				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Experimenter</span>
						<input type="text" class="form-control" value="@Notes.Experimenter">
					</div>
				</div>

				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Internal</span>
						<input type="text" class="form-control" value="@Notes.Internal">
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">External</span>
						<input type="text" class="form-control" value="@Notes.External">
					</div>
				</div>

				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Cage Card</span>
						<input type="text" class="form-control" value="@Notes.CageCard">
					</div>
				</div>

				<div class="col-md">
					<div class="input-group mb-3 input-group-sm col-3">
						<span class="input-group-text" id="basic-addon1">Intervention</span>
						<input type="text" class="form-control" value="@Notes.Intervention">
					</div>
				</div>
			</div>

			<div>
				<textarea class="form-control" style="height: 300px;">@Notes.Notes</textarea>
			</div>

			<div class="mt-3 text-end">
				<button class="btn btn-primary">Save</button>
			</div>

		</div>

	</main>
}

@code {
	[Parameter]
	[EditorRequired]
	public AbfFolder? AbfFolder { get; set; } = null;

	private bool ExperimentFileExists => !string.IsNullOrWhiteSpace(AbfFolder?.ExperimentTxt);

	private AbfDayNotes Notes => AbfFolder is not null ? AbfDayNotes.FromTxt(AbfFolder.ExperimentTxt) : new AbfDayNotes();
}
